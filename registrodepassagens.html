
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Passagens</title>
    <!-- Link para o arquivo CSS na raiz -->
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="/manifest.json">
    
</head>

<body>
    <h2>Registro de Passagens</h2>
    <label for="transporte">Selecione o transporte:</label>
    <select id="transporte">
        <option value="linha">Selecione uma linha</option>
        <option value="343">343</option>
        <option value="353">353</option>
        <option value="T8">T8</option>
        <option value="Agronomia">Agronomia</option>
        <option value="704">704</option>
        <option value="Trem">Trem</option>
    </select>
    <label for="tipoPassagem">Selecione o tipo de passagem:</label>
    <select id="tipoPassagem">
        <option value="inteira">Tipo de passagem</option>
        <option value="inteira">Passagem Inteira</option>
        <option value="meia">Meia Passagem</option>
    </select>
    <input type="text" id="valorPassagem" placeholder="Valor da passagem" readonly>
    <input type="text" id="credito" placeholder="Crédito">
    <input type="text" id="data" placeholder="Data" readonly>
    <input type="text" id="hora_registro" placeholder="Hora Registro" readonly>
    <button onclick="calcularValor()">Calcular Valor da Passagem</button>
    <br>
    <br>
    <button onclick="enviarParaPlanilha()">Enviar para Planilha</button>
    <br>
    <br>
    <button onclick="registrarDataEHora()">Registrar Data e Hora</button>
    <!-- Botão para voltar para a Home -->
    <button onclick="voltarParaHome()" style="margin-top: 20px;">Voltar para Home</button>
    <script>
        const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/zuae2g1vhosmm';
        function calcularValor() {
            const transporte = document.getElementById('transporte').value;
            const tipoPassagem = document.getElementById('tipoPassagem').value;
            let valor;
            if (['343', '353', 'T8', 'Agronomia', '704'].includes(transporte)) {
                valor = tipoPassagem === 'inteira' ? 'R$ 4,80' : 'R$ 2,40';
            } else if (transporte === 'Trem') {
                valor = tipoPassagem === 'inteira' ? 'R$ 4,50' : 'R$ 3,87';
            }
            document.getElementById('valorPassagem').value = valor;
        }
        async function enviarParaPlanilha() {
            const transporte = document.getElementById('transporte').value;
            const tipoPassagem = document.getElementById('tipoPassagem').value;
            const valorPassagem = document.getElementById('valorPassagem').value;
            const credito = document.getElementById('credito').value.trim();
            const data = document.getElementById('data').value;
            const hora_registro = document.getElementById('hora_registro').value;
            // Validar o campo de crédito
            if (credito === '') {
                alert("Por favor, insira um valor de crédito válido.");
                return;
            }
            const registro = {
                "Transporte": transporte,
                "TipoPassagem": tipoPassagem,
                "ValorPassagem": valorPassagem,
                "Credito": credito,
                "Data": data,
                "HoraRegistro": hora_registro
            };
            try {
                const response = await fetch(SHEETDB_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(registro)
                });
                if (!response.ok) {
                    const errorMessage = await response.text();
                    throw new Error(`Erro ${response.status}: ${errorMessage}`);
                }
                alert("Dados enviados com sucesso para a planilha!");
            } catch (error) {
                console.error("Erro ao enviar dados:", error.message);
                alert(`Ocorreu um erro ao enviar os dados para a planilha: ${error.message}`);
            }
        }
        function registrarDataEHora() {
            const dataAtual = new Date().toISOString().split('T')[0];
            const horaAtual = new Date().toLocaleTimeString();
            document.getElementById('data').value = dataAtual;
            document.getElementById('hora_registro').value = horaAtual;
        }
        function voltarParaHome() {
            window.location.href = 'index.html'; // Redireciona para a página inicial (supondo que o nome do arquivo seja "index.html")
        }
    </script>
<script>
        (function(d, s, id) {
            if (d.getElementById(id)) {
                if (window.__TOMORROW__) {
                    window.__TOMORROW__.renderWidget();
                }
                return;
            }
            const fjs = d.getElementsByTagName(s)[0];
            const js = d.createElement(s);
            js.id = id;
            js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";
            fjs.parentNode.insertBefore(js, fjs);
        })(document, 'script', 'tomorrow-sdk');
        </script>
        <div class="tomorrow"
           data-location-id="015551,015551"
           data-language="PT"
           data-unit-system="METRIC"
           data-skin="dark"
           data-widget-type="aqi6"
           style="padding-bottom:22px;position:relative;"
        >
          <a
            href="https://www.tomorrow.io/weather-api/"
            rel="nofollow noopener noreferrer"
            target="_blank"
            style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
          >
            <img
              alt="Powered by the Tomorrow.io Weather API"
              src="https://weather-website-client.tomorrow.io/img/powered-by.svg"
              width="250"
              height="18"
            />
          </a>
        </div>
ChatGPT 3.5

User
Preciso retornar os dados desta planilha

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Passagens</title>
    <!-- Link para o arquivo CSS na raiz -->
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="/manifest.json">
    
</head>

<body>
    <h2>Registro de Passagens</h2>
    <label for="transporte">Selecione o transporte:</label>
    <select id="transporte">
        <option value="linha">Selecione uma linha</option>
        <option value="343">343</option>
        <option value="353">353</option>
        <option value="T8">T8</option>
        <option value="Agronomia">Agronomia</option>
        <option value="704">704</option>
        <option value="Trem">Trem</option>
    </select>
    <label for="tipoPassagem">Selecione o tipo de passagem:</label>
    <select id="tipoPassagem">
        <option value="inteira">Tipo de passagem</option>
        <option value="inteira">Passagem Inteira</option>
        <option value="meia">Meia Passagem</option>
    </select>
    <input type="text" id="valorPassagem" placeholder="Valor da passagem" readonly>
    <input type="text" id="credito" placeholder="Crédito">
    <input type="text" id="data" placeholder="Data" readonly>
    <input type="text" id="hora_registro" placeholder="Hora Registro" readonly>
    <button onclick="calcularValor()">Calcular Valor da Passagem</button>
    <br>
    <br>
    <button onclick="enviarParaPlanilha()">Enviar para Planilha</button>
    <br>
    <br>
    <button onclick="registrarDataEHora()">Registrar Data e Hora</button>
    <!-- Botão para voltar para a Home -->
    <button onclick="voltarParaHome()" style="margin-top: 20px;">Voltar para Home</button>
    <script>
        const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/zuae2g1vhosmm';
        function calcularValor() {
            const transporte = document.getElementById('transporte').value;
            const tipoPassagem = document.getElementById('tipoPassagem').value;
            let valor;
            if (['343', '353', 'T8', 'Agronomia', '704'].includes(transporte)) {
                valor = tipoPassagem === 'inteira' ? 'R$ 4,80' : 'R$ 2,40';
            } else if (transporte === 'Trem') {
                valor = tipoPassagem === 'inteira' ? 'R$ 4,50' : 'R$ 3,87';
            }
            document.getElementById('valorPassagem').value = valor;
        }
        async function enviarParaPlanilha() {
            const transporte = document.getElementById('transporte').value;
            const tipoPassagem = document.getElementById('tipoPassagem').value;
            const valorPassagem = document.getElementById('valorPassagem').value;
            const credito = document.getElementById('credito').value.trim();
            const data = document.getElementById('data').value;
            const hora_registro = document.getElementById('hora_registro').value;
            // Validar o campo de crédito
            if (credito === '') {
                alert("Por favor, insira um valor de crédito válido.");
                return;
            }
            const registro = {
                "Transporte": transporte,
                "TipoPassagem": tipoPassagem,
                "ValorPassagem": valorPassagem,
                "Credito": credito,
                "Data": data,
                "HoraRegistro": hora_registro
            };
            try {
                const response = await fetch(SHEETDB_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(registro)
                });
                if (!response.ok) {
                    const errorMessage = await response.text();
                    throw new Error(`Erro ${response.status}: ${errorMessage}`);
                }
                alert("Dados enviados com sucesso para a planilha!");
            } catch (error) {
                console.error("Erro ao enviar dados:", error.message);
                alert(`Ocorreu um erro ao enviar os dados para a planilha: ${error.message}`);
            }
        }
        function registrarDataEHora() {
            const dataAtual = new Date().toISOString().split('T')[0];
            const horaAtual = new Date().toLocaleTimeString();
            document.getElementById('data').value = dataAtual;
            document.getElementById('hora_registro').value = horaAtual;
        }
        function voltarParaHome() {
            window.location.href = 'index.html'; // Redireciona para a página inicial (supondo que o nome do arquivo seja "index.html")
        }
    </script>
<script>
        (function(d, s, id) {
            if (d.getElementById(id)) {
                if (window.__TOMORROW__) {
                    window.__TOMORROW__.renderWidget();
                }
                return;
            }
            const fjs = d.getElementsByTagName(s)[0];
            const js = d.createElement(s);
            js.id = id;
            js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";
            fjs.parentNode.insertBefore(js, fjs);
        })(document, 'script', 'tomorrow-sdk');
        </script>
        <div class="tomorrow"
           data-location-id="015551,015551"
           data-language="PT"
           data-unit-system="METRIC"
           data-skin="dark"
           data-widget-type="aqi6"
           style="padding-bottom:22px;position:relative;"
        >
          <a
            href="https://www.tomorrow.io/weather-api/"
            rel="nofollow noopener noreferrer"
            target="_blank"
            style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
          >
            <img
              alt="Powered by the Tomorrow.io Weather API"
              src="https://weather-website-client.tomorrow.io/img/powered-by.svg"
              width="250"
              height="18"
            />
          </a>
        </div>
</body>
</html>

ChatGPT
Parece que você está tentando retornar os dados de uma planilha que está sendo atualizada por um aplicativo da web. No entanto, a planilha não está visível no código HTML fornecido.

Para retornar os dados da planilha, você precisará acessar o link da planilha fornecido em SHEETDB_API_URL (https://sheetdb.io/api/v1/zuae2g1vhosmm) diretamente em um navegador ou através de uma solicitação HTTP em algum código, como Python, JavaScript, etc.

Você pode usar uma solicitação GET para esse URL para receber os dados na forma de JSON ou outro formato, dependendo da API da planilha. Com base nos dados recebidos, você pode processá-los conforme necessário.



User
Dê um exemplo 

ChatGPT
Claro! Aqui está um exemplo simples de como você pode fazer uma solicitação GET para a API da planilha em JavaScript usando o método fetch():

javascript
Copy code
const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/zuae2g1vhosmm';

fetch(SHEETDB_API_URL)
  .then(response => {
    if (!response.ok) {
      throw new Error('Erro ao obter os dados da planilha');
    }
    return response.json();
  })
  .then(data => {
    console.log('Dados da planilha:', data);
    // Aqui você pode processar os dados conforme necessário
  })
  .catch(error => {
    console.error('Erro:', error);
  });
Este código faz uma solicitação GET para a URL da API da planilha. Quando a resposta é recebida, ela é convertida para JSON. Em seguida, você pode processar os dados dentro da segunda função then(). Lembre-se de que você precisa lidar com os dados de acordo com a estrutura da resposta da API da planilha.



User
É preciso fazer uma página separada?

ChatGPT
Não necessariamente. Você pode integrar esse código em qualquer página da web onde você deseje exibir ou manipular os dados da planilha. Se você já tem uma página existente onde deseja exibir os dados da planilha, pode simplesmente adicionar esse código JavaScript a essa página.

Por exemplo, você pode adicionar o código dentro de uma tag <script> na seção <head> ou <body> da sua página web existente. Assim, quando os visitantes acessarem essa página, ela fará uma solicitação à API da planilha e exibirá ou processará os dados conforme necessário.



User
E como será apresentado os dados visualmente?

ChatGPT
A apresentação visual dos dados depende do que você deseja fazer com eles e como você deseja exibi-los na sua página web. Aqui estão algumas maneiras de apresentar os dados visualmente:

Tabela HTML: Você pode criar uma tabela HTML dinamicamente usando JavaScript e inserir os dados da planilha nessa tabela. Isso permitirá que você exiba os dados de forma tabular e os estilize conforme necessário.

Gráficos e visualizações: Se os dados da planilha forem numéricos ou categorizados, você pode usar bibliotecas JavaScript, como Chart.js ou D3.js, para criar gráficos e visualizações interativas. Por exemplo, você pode criar gráficos de barras, gráficos de pizza, gráficos de linhas, etc., para representar os dados visualmente.

Listagens ou cards: Dependendo da natureza dos dados, você pode apresentá-los como uma lista de itens ou como cards individuais. Isso pode ser útil para exibir informações detalhadas sobre cada entrada na planilha.

Mapas interativos: Se os dados da planilha incluírem informações de localização, você pode usar bibliotecas de mapas, como Leaflet.js ou Google Maps API, para criar mapas interativos e exibir os dados geográficos de forma visual.

A escolha da apresentação visual dependerá dos requisitos do seu projeto, do tipo de dados na planilha e da experiência do usuário que você deseja oferecer na sua página web.



User
Coloque um botão para chamar a função get 
const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/zuae2g1vhosmm';

fetch(SHEETDB_API_URL)
  .then(response => {
    if (!response.ok) {
      throw new Error('Erro ao obter os dados da planilha');
    }
    return response.json();
  })
  .then(data => {
    console.log('Dados da planilha:', data);
    // Aqui você pode processar os dados conforme necessário
  })
  .catch(error => {
    console.error('Erro:', error);
  });

ChatGPT
Claro! Aqui está um exemplo de como você pode adicionar um botão para chamar a função que faz a solicitação GET para a API da planilha:

html
Copy code
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo de Chamada de API de Planilha</title>
</head>


    
    <button onclick="getDataFromSheet()">Obter Dados da Planilha</button>

    <script>
        function getDataFromSheet() {
            const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/zuae2g1vhosmm';

            fetch(SHEETDB_API_URL)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro ao obter os dados da planilha');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Dados da planilha:', data);
                    // Aqui você pode processar os dados conforme necessário
                    // Por exemplo, exibindo-os em uma tabela HTML ou em gráficos
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao obter os dados da planilha. Por favor, tente novamente.');
                });
        }
    </script>
    
</body>
</html>
